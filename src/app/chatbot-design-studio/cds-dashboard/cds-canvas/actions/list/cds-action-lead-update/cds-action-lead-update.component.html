<div *ngIf="previewMode" class="cds-action-preview">
    
    <div *ngIf="(action?.update | json) !== '{}' ">
        <div class="action-row" *ngFor="let item of action?.update | keyvalue; let i=index">
            <div class="action-row-left">
                <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 0 24 24" width="20px">
                    <path d="M0 0h24v24H0V0z" fill="none" />
                    <path
                        d="M12 1.95c-5.52 0-10 4.48-10 10s4.48 10 10 10h5v-2h-5c-4.34 0-8-3.66-8-8s3.66-8 8-8 8 3.66 8 8v1.43c0 .79-.71 1.57-1.5 1.57s-1.5-.78-1.5-1.57v-1.43c0-2.76-2.24-5-5-5s-5 2.24-5 5 2.24 5 5 5c1.38 0 2.64-.56 3.54-1.47.65.89 1.77 1.47 2.96 1.47 1.97 0 3.5-1.6 3.5-3.57v-1.43c0-5.52-4.48-10-10-10zm0 13c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z" />
                </svg>
            </div>
            <div class="action-row-right">
                <b>{{item.key}}</b> : {{item.value}}
            </div>
        </div>
    </div>

    <div *ngIf="(action?.update | json ) == ( {} | json)">
        no property
    </div>

</div>


<div *ngIf="!previewMode">
    <div class="content-panel-intent-detail" id="scrollMe">

        <ng-container *ngIf="showCards" [ngTemplateOutlet]="sections"></ng-container>
        <ng-container *ngIf="showPlaceholder" [ngTemplateOutlet]="placeholder"></ng-container>

        <div class="filter-add-group-wrapper add-conditions-group">
            <div class="filter-add-group" (click)="onAddNewProperty()">
                <div class="filter-add-group-plus"><span class="material-icons">add</span></div>
                <span class="text">{{'CDSCanvas.UpdateProperty' | translate }}</span>
            </div> 
        </div>
    
    </div>
</div>


<ng-template #placeholder>
    <div class="content">

        <form [formGroup]="leadPropertyFormGroup">
            <div class="setting-wrapper">
                <div class="field-box" style="width: 100%;">
                    <label class="title-label">{{'CDSCanvas.Key' | translate}}</label>
                    <!-- <div class="text-editor-wpr" style="position: relative;"> -->
                    <!-- [limitCharsText]="150"  -->
                    <cds-select
                        [items]="leadPropertyListFiltered"
                        [bindLabelSelect]="'name'"
                        [bindValueSelect]="'value'"
                        [searchable]="true"
                        [itemSelected]="leadPropertyFormGroup.controls.key.value"
                        (onSelected)="onChangeSelect($event)">
                    </cds-select>
                </div>
        
                <div class="field-box" style="width: 100%;">
                    <label class="title-label">{{'CDSCanvas.Value' | translate}}</label>
                    <!-- <div class="text-editor-wpr" style="position: relative;"> -->
                    <!-- [limitCharsText]="150"  -->
                    <cds-textarea class="text-editable-div"
                        [emojiPikerBtn]="false" 
                        [textLimitBtn]="false" 
                        [text]="selectedValue"
                        [minRow]="1" [maxRow]="1" 
                        popoverVerticalAlign="above"
                        (blur)="onBlur($event)"
                        (changeTextarea)="onChangeTextarea($event)">
                    </cds-textarea>
                </div>
            </div>
        </form>  

    </div>
</ng-template>

<ng-template #sections>
    <div class="content" *ngFor="let item of action?.update | keyvalue; let i=index">

        <div class="control-buttons">
            <div class="filter-remove" (click)="onDeleteProperty(i, item.key)">
                <span class="material-icons-outlined">delete</span>
            </div>
        </div>
        <div class="setting-wrapper">
            <div class="field-box" style="width: 100%;">
                <label class="title-label">{{'CDSCanvas.Key' | translate}}</label>
                <!-- <div class="text-editor-wpr" style="position: relative;"> -->
                <!-- [limitCharsText]="150"  -->
                <cds-select
                    [items]="leadPropertyListFiltered"
                    [bindLabelSelect]="'name'"
                    [bindValueSelect]="'value'"
                    [searchable]="true"
                    [itemSelected]="item.key"
                    (onSelected)="onChangeSelect($event)">
                </cds-select>
            </div>
    
            <div class="field-box" style="width: 100%;">
                <label class="title-label">{{'CDSCanvas.Value' | translate}}</label>
                <!-- <div class="text-editor-wpr" style="position: relative;"> -->
                <!-- [limitCharsText]="150"  -->
                <cds-textarea class="text-editable-div"
                    [emojiPikerBtn]="false" 
                    [textLimitBtn]="false" 
                    [text]="item.value"
                    [minRow]="1" [maxRow]="1" 
                    popoverVerticalAlign="above"
                    (blur)="onBlur($event)"
                    (changeTextarea)="onChangeTextarea($event, 'selectedValue')">
                </cds-textarea>
            </div>
        </div>

    </div>
</ng-template>